import matplotlib.pyplot as plt
import networkx as nx

# Create a graph
G = nx.Graph()

# Define all nodes with attributes
nodes = [
    (194,7375,1125,1.894858336),(275,7125,1625,2.3274102),(276,7375,1625,1.8516353952),
    (277,7625,1625,2.19092048),(278,7875,1625,3.1555652112),(279,8125,1625,5.228147056),
    (280,8375,1625,5.9471760768),(281,8625,1625,9.9800607888),(282,8875,1625,12.574967968),
    (155,7875,875,3.8607183392),(156,8125,875,2.1364759088),(157,8375,875,1.9968719872),
    (158,8625,875,3.2302081312),(159,8875,875,7.35319694083),(240,8625,1375,8.2696411872),
    (34,8375,125,3.93457836875),(113,7625,625,3.2090355712),(154,7625,875,3.9349924704),
    (316,7125,1875,2.0056675552), (317,7375,1875,2.170794024), (318,7625,1875,3.7497703968),
    (319,7875,1875,4.9107240832),(320,8125,1875,7.3643128704),(321,8375,1875,9.0395193168),
    (322,8625,1875,9.9855741456),(195,7625,1125,1.8493573232),(196,7875,1125,1.995950616),
    (197,8125,1125,1.8141501776),(198,8375,1125,2.3381283008),(199,8625,1125,7.4167936912),
    (200,8875,1125,11.1279674828), (73,7875,375,3.6688265536), (74,8125,375,3.9177938512),
    (75,8375,375,3.1622205072), (357,7125,2125,1.985057664), (33,8125,125,3.55803318301),
    (359,7625,2125,5.8579292992),(360,7875,2125,9.8448550288),(361,8125,2125,9.5917228656),
    (234,7125,1375,2.1595040896),(235,7375,1375,1.765718),(236,7625,1375,1.7753931776),
    (237,7875,1375,1.7943166368),(238,8125,1375,2.1691901264), (239,8375,1375,3.7605919328),
    (112,7375,625,1.7815404096), (241,8875,1375,13.116026368), (114,7875,625,5.6987999616),
    (115,8125,625,3.4929839632),(116,8375,625,2.3094678544), (153,7375,875,3.2829771872)
]

# Add all nodes with attributes
for node in nodes:
    try:
        node_id, x, y, z = node[:4]
        inflow = node[4] if len(node) > 4 else 0
        G.add_node(node_id, x=x, y=y, z=z, inflow=inflow)
    except Exception as e:
        print(f"Skipping node {node}: insufficient data")

# Choose any 15 node IDs to create a simple ring of edges for visualization
node_ids = [node[0] for node in nodes[:15]]

# Create ring edges using actual node IDs
edges = [(node_ids[i], node_ids[(i + 1) % len(node_ids)]) for i in range(len(node_ids))]
G.add_edges_from(edges)

# Get positions for plotting
try:
    pos = {node: (G.nodes[node]['x'], G.nodes[node]['y']) for node in G.nodes()}
except KeyError as e:
    print(f"Node missing attribute: {e}")
    pos = {}

# Plotting
plt.figure(figsize=(10, 8))
nx.draw(G, pos=pos, with_labels=True, node_size=500, node_color='skyblue', edge_color='gray')
plt.title('Sewer Network Graph (15 Nodes)')
plt.show()
